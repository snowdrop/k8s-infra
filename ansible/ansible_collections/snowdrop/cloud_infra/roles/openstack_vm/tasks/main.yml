---
- name: "Print required information"
  debug: 
    msg:
      - "vm_name: {{ vm_name }}"
  when: "vm_name is defined"

- include_tasks: vm_create.yml
  when: "state is defined and state == 'present'"

- include_tasks: vm_remove.yml
  when: "state is defined and state == 'absent'"
...
