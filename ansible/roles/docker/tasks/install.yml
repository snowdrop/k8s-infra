---
- name: "Call the old docker removal tasks"
  include_tasks: remove_old_version.yml

- name: "Install dependencies needed by docker"
  yum:
    name: "{{ docker_dependencies }}"
    state: present
  become: yes

- name: "Add docker repository"
  shell: "yum config-manager --add-repo=https://download.docker.com/linux/centos/docker-ce.repo"
  become: yes

- name: Install docker
  yum: 
    name: "{{ docker_packages }}"
    state: present
  become: yes

- name: "Ensures /etc/docker dir exists"
  file: path=/etc/docker state=directory
  become: yes

- name: "Start docker"
  systemd:
    state: restarted
    name: docker
    enabled: yes
  become: yes
...
